{"path":"apis/screenshot","templateID":1,"sharedPropsHashes":{"apiList":"Z1R9RQi"},"localProps":{"reference":{"title":"スクリーンショットのシェア","slug":"apis/screenshot","description":"「スクリーンショットのシェア」のAPIでの利用方法","order":4,"navi":"APIでの利用方法","contents":"<h2 id=\"目次\">目次</h2>\n<ul>\n<li><a href=\"#%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88API\">スクリーンショットAPI</a></li>\n<li><a href=\"#%E3%83%84%E3%82%A4%E3%83%BC%E3%83%88%E5%86%85%E5%AE%B9%E5%B7%AE%E3%81%97%E6%9B%BF%E3%81%88API\">ツイート内容差し替えAPI</a></li>\n</ul>\n<h2 id=\"apiでの利用方法\">APIでの利用方法</h2>\n<h3 id=\"スクリーンショットapi\">スクリーンショットAPI</h3>\n<table>\n<thead>\n<tr>\n<th align=\"left\">メソッド</th>\n<th align=\"left\"><code>window.RPGAtsumaru.screenshot.displayModal()</code></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">説明</td>\n<td align=\"left\">このメソッドを呼び出した時点でのスクリーンショットを撮影し、Twitterに投稿するモーダルを表示します</td>\n</tr>\n<tr>\n<td align=\"left\">引数</td>\n<td align=\"left\">なし</td>\n</tr>\n<tr>\n<td align=\"left\">戻り値</td>\n<td align=\"left\"><code>Promise&lt;ScreenshotModalResults&gt;</code></td>\n</tr>\n</tbody></table>\n<h4 id=\"戻り値の型-screenshotmodalresults-について\">戻り値の型 ScreenshotModalResults について</h4>\n<p>戻り値で取得できる <code>ScreenshotModalResults</code> は以下のような型です。</p>\n<pre><code class=\"language-js\">interface ScreenshotModalResults {\n    tweeted: boolean\n}</code></pre>\n<p>プロパティの内容は次のようになっています。</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">プロパティ名</th>\n<th align=\"left\">型</th>\n<th align=\"left\">内容</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">tweeted</td>\n<td align=\"left\"><code>boolean</code></td>\n<td align=\"left\">このAPIで表示したモーダルから実際にツイートしたかどうか</td>\n</tr>\n</tbody></table>\n<h4 id=\"戻り値の例\">戻り値の例</h4>\n<p>戻り値で取得できる <code>ScreenshotModalResults</code> は以下のような型です。</p>\n<pre><code class=\"language-js\">// window.RPGAtsumaru.screenshot.displayModal().then(function(v) { console.log(v) }) を実行\n{\n    tweeted: true\n}</code></pre>\n<h3 id=\"ツイート内容差し替えapi\">ツイート内容差し替えAPI</h3>\n<table>\n<thead>\n<tr>\n<th align=\"left\">メソッド</th>\n<th align=\"left\"><code>window.RPGAtsumaru.screenshot.setTweetMessage(tweetSettings: TweetSettings | null)</code></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">説明</td>\n<td align=\"left\">スクリーンショットAPIやカメラボタンでモーダルを表示したときに、最初に表示されているツイート内容を差し替えます</td>\n</tr>\n<tr>\n<td align=\"left\">引数</td>\n<td align=\"left\"><code>tweetSettings</code> : 差し替えるツイート内容を指定します。</td>\n</tr>\n<tr>\n<td align=\"left\">戻り値</td>\n<td align=\"left\"><code>void</code></td>\n</tr>\n</tbody></table>\n<h4 id=\"引数の型-tweetsettings-について\">引数の型 TweetSettings について</h4>\n<p>引数に指定できる <code>TweetSettings</code> は以下のような型です。</p>\n<pre><code class=\"language-js\">interface TweetSettings {\n    tweetText?: string;\n    param1?: string;\n    param2?: string;\n    param3?: string;\n    param4?: string;\n    param5?: string;\n    param6?: string;\n    param7?: string;\n    param8?: string;\n    param9?: string;\n}</code></pre>\n<p>プロパティの内容は次のようになっています。</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">プロパティ名</th>\n<th align=\"left\">型</th>\n<th align=\"left\">内容</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">tweetText</td>\n<td align=\"left\"><code>string</code></td>\n<td align=\"left\">ツイートの内容です。指定すると別途「ゲーム情報編集」の「スクショツイート文言設定」で設定した値（初期値）よりも本APIでの設定値が優先されます。指定しないと、初期値に戻ります。</td>\n</tr>\n<tr>\n<td align=\"left\">param1 - param9</td>\n<td align=\"left\"><code>string</code></td>\n<td align=\"left\">ゲームURLにクエリを付加します。<a href=\"/copy-query\">クエリ情報の取得API</a>と合わせてURLからデータを取り込むことができます。</td>\n</tr>\n</tbody></table>\n<h4 id=\"引数の例\">引数の例</h4>\n<p>「ゲーム情報編集」の「スクショツイート文言設定」が <code>占いゲーム</code> で、ゲームIDが <code>gm1234</code> の場合、そのままモーダルを開くと以下のツイート内容になります。</p>\n<blockquote>\n<p>占いゲーム #gm1234 #RPGアツマール <a href=\"https://game.nicovideo.jp/atsumaru/games/gm1234?link=share_twitter_sc\">https://game.nicovideo.jp/atsumaru/games/gm1234?link=share_twitter_sc</a></p>\n</blockquote>\n<p>そこで次のようなJavaScriptを実行してみます。</p>\n<pre><code class=\"language-js\">window.RPGAtsumaru.screenshot.setTweetMessage({\n    tweetText: &#39;このユーザーの運勢は【大吉】でした。あなたも占ってみませんか？ #占い&#39;,\n    param1: &#39;superlucky&#39;,\n    param5: &#39;twitter&#39;\n});</code></pre>\n<p>すると、以下のように先頭の文章が <code>tweetText</code> の内容となり、ゲームURLに <code>param1 - param9</code> のうち指定したクエリが付加されます。</p>\n<blockquote>\n<p>このユーザーの運勢は【大吉】でした。あなたも占ってみませんか？ #占い #gm1234 #RPGアツマール <a href=\"https://game.nicovideo.jp/atsumaru/games/gm1234?link=share_twitter_sc&amp;param1=superlucky&amp;param5=twitter\">https://game.nicovideo.jp/atsumaru/games/gm1234?link=share_twitter_sc&amp;param1=superlucky&amp;param5=twitter</a></p>\n</blockquote>\n<h4 id=\"備考\">備考</h4>\n<ul>\n<li>ハッシュタグ <code>#(ゲームID) #RPGアツマール</code> とゲームURLが自動的に必ず付加されます。</li>\n<li>上の例の <code>#占い</code> のように <code>#</code> を用いた文章を含めれば、独自にハッシュタグを付加することができます。</li>\n<li>引数にnullを指定すると最初の文章（上の例では <code>占いゲーム</code> ）に戻り、クエリもすべて外されます。</li>\n<li>あくまで最初にツイート欄に表示される内容なので、ここからさらにユーザーの手によりツイート内容を自由に編集できます。</li>\n</ul>\n<h2 id=\"関連ドキュメント\">関連ドキュメント</h2>\n<table>\n<thead>\n<tr>\n<th align=\"left\">ドキュメント</th>\n<th align=\"left\">リンク</th>\n<th align=\"left\">備考</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">機能解説</td>\n<td align=\"left\"><a href=\"/screenshot\">スクリーンショットのシェア</a></td>\n<td align=\"left\">機能概要や全般的な解説</td>\n</tr>\n<tr>\n<td align=\"left\">プラグインでの利用方法</td>\n<td align=\"left\"><a href=\"/plugins\">プラグインでの利用方法</a></td>\n<td align=\"left\">RPGツクールシリーズユーザー向け</td>\n</tr>\n</tbody></table>\n<h2 id=\"最終更新日\">最終更新日</h2>\n<ul>\n<li>2020/02/28</li>\n</ul>\n"},"title":"スクリーンショットのシェア","path":"/apis/screenshot"}}
