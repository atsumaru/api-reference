{"path":"apis/gift","templateID":1,"sharedPropsHashes":{"apiList":"2azxz1"},"localProps":{"reference":{"title":"ギフト","slug":"apis/gift","description":"「ギフト」のAPIでの利用方法","order":16,"navi":"APIでの利用方法","contents":"<h2 id=\"目次\">目次</h2>\n<ul>\n<li><a href=\"#%E3%82%AE%E3%83%95%E3%83%88%E6%8A%95%E7%A8%BF%E7%94%BB%E9%9D%A2%E8%A1%A8%E7%A4%BA\">ギフト投稿画面表示</a></li>\n<li><a href=\"#%E3%82%AE%E3%83%95%E3%83%88%E7%B4%AF%E8%A8%88%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88%E5%8F%96%E5%BE%97\">ギフト累計ポイント取得</a></li>\n<li><a href=\"#%E3%82%AE%E3%83%95%E3%83%88%E8%87%AA%E5%B7%B1%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88%E5%8F%96%E5%BE%97\">ギフト自己ポイント取得</a></li>\n<li><a href=\"#%E3%82%AE%E3%83%95%E3%83%88%E5%B1%A5%E6%AD%B4%E5%8F%96%E5%BE%97\">ギフト履歴取得</a></li>\n<li><a href=\"#%E3%82%AE%E3%83%95%E3%83%88%E3%83%A9%E3%83%B3%E3%82%AD%E3%83%B3%E3%82%B0%E5%8F%96%E5%BE%97\">ギフトランキング取得</a></li>\n<li><a href=\"#%E8%A1%A8%E7%A4%BA%E3%82%AE%E3%83%95%E3%83%88%E5%8F%96%E5%BE%97\">表示ギフト取得</a></li>\n<li><a href=\"#%E6%8A%95%E7%A8%BF%E3%82%AE%E3%83%95%E3%83%88%E5%8F%96%E5%BE%97\">投稿ギフト取得</a></li>\n</ul>\n<h2 id=\"apiでの利用方法\">APIでの利用方法</h2>\n<h3 id=\"ギフト投稿画面表示\">ギフト投稿画面表示</h3>\n<table>\n<thead>\n<tr>\n<th align=\"left\">メソッド</th>\n<th align=\"left\"><code>window.RPGAtsumaru.gift.displayCatalogModal()</code></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">説明</td>\n<td align=\"left\">ギフトの一覧を表示し、投稿を促す画面を表示できます。プレイヤー本人がギフトボタン（プレゼントボックスのアイコン）を押したときと同じ動作をします。</td>\n</tr>\n<tr>\n<td align=\"left\">引数</td>\n<td align=\"left\">なし</td>\n</tr>\n<tr>\n<td align=\"left\">戻り値</td>\n<td align=\"left\">なし</td>\n</tr>\n</tbody></table>\n<h3 id=\"ギフト累計ポイント取得\">ギフト累計ポイント取得</h3>\n<table>\n<thead>\n<tr>\n<th align=\"left\">メソッド</th>\n<th align=\"left\"><code>window.RPGAtsumaru.gift.getTotalPoints()</code></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">説明</td>\n<td align=\"left\">このゲームに対して、すべてのユーザーが合計何ポイントギフトしたかを取得できます</td>\n</tr>\n<tr>\n<td align=\"left\">引数</td>\n<td align=\"left\">なし</td>\n</tr>\n<tr>\n<td align=\"left\">戻り値</td>\n<td align=\"left\"><code>Promise&lt;number&gt;</code></td>\n</tr>\n<tr>\n<td align=\"left\">制限</td>\n<td align=\"left\">このAPIは<a href=\"/common/rate-limit\">APIの呼び出し回数制限</a>の対象です</td>\n</tr>\n</tbody></table>\n<h4 id=\"戻り値の例\">戻り値の例</h4>\n<pre><code class=\"language-js\">// window.RPGAtsumaru.gift.getTotalPoints().then(function(v) { console.log(v) }) を実行\n100000</code></pre>\n<h4 id=\"起こりうるエラーの種類\">起こりうるエラーの種類</h4>\n<table>\n<thead>\n<tr>\n<th align=\"left\">名前</th>\n<th align=\"left\">説明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\"><a href=\"/common/error\">INTERNAL_SERVER_ERROR</a></td>\n<td align=\"left\">RPGアツマールのサービス側で何らかの問題が発生しているか、または通信に失敗した</td>\n</tr>\n<tr>\n<td align=\"left\"><a href=\"/common/error\">API_CALL_LIMIT_EXCEEDED</a></td>\n<td align=\"left\">短時間にゲームAPIを利用しすぎて、一時的に利用を制限されている</td>\n</tr>\n</tbody></table>\n<h3 id=\"ギフト自己ポイント取得\">ギフト自己ポイント取得</h3>\n<table>\n<thead>\n<tr>\n<th align=\"left\">メソッド</th>\n<th align=\"left\"><code>window.RPGAtsumaru.gift.getMyPoints()</code></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">説明</td>\n<td align=\"left\">このゲームに対して、プレイヤー本人が各ギフトごとに合計何ポイントギフトしたかを取得できます</td>\n</tr>\n<tr>\n<td align=\"left\">引数</td>\n<td align=\"left\">なし</td>\n</tr>\n<tr>\n<td align=\"left\">戻り値</td>\n<td align=\"left\"><code>Promise&lt;GiftMyPoints&gt;</code></td>\n</tr>\n<tr>\n<td align=\"left\">制限</td>\n<td align=\"left\">このAPIは<a href=\"/common/rate-limit\">APIの呼び出し回数制限</a>の対象です</td>\n</tr>\n</tbody></table>\n<h4 id=\"戻り値の型-giftmypoints-について\">戻り値の型 GiftMyPoints について</h4>\n<p>戻り値で取得できる <code>GiftMyPoints</code> は以下のような型です。</p>\n<pre><code class=\"language-js\">interface GiftMyPoints {\n    [itemCode: string]: number;\n}</code></pre>\n<p>プロパティの内容は次のようになっています。</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">プロパティ</th>\n<th align=\"left\">型</th>\n<th align=\"left\">内容</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">[itemCode: string]</td>\n<td align=\"left\"><code>number</code></td>\n<td align=\"left\"><code>itemCode</code> の種類のギフトに対して自分が合計何ポイントギフトしたか</td>\n</tr>\n</tbody></table>\n<h4 id=\"戻り値の例-1\">戻り値の例</h4>\n<pre><code class=\"language-js\">// window.RPGAtsumaru.gift.getMyPoints().then(function(v) { console.log(v) }) を実行\n{\n    &quot;_og-flower&quot;: 3000,\n    &quot;_og-cake&quot;: 10000\n}</code></pre>\n<h4 id=\"起こりうるエラーの種類-1\">起こりうるエラーの種類</h4>\n<table>\n<thead>\n<tr>\n<th align=\"left\">名前</th>\n<th align=\"left\">説明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\"><a href=\"/common/error\">UNAUTHORIZED</a></td>\n<td align=\"left\">プレイヤーがログインしていない</td>\n</tr>\n<tr>\n<td align=\"left\"><a href=\"/common/error\">INTERNAL_SERVER_ERROR</a></td>\n<td align=\"left\">RPGアツマールのサービス側で何らかの問題が発生しているか、または通信に失敗した</td>\n</tr>\n<tr>\n<td align=\"left\"><a href=\"/common/error\">API_CALL_LIMIT_EXCEEDED</a></td>\n<td align=\"left\">短時間にゲームAPIを利用しすぎて、一時的に利用を制限されている</td>\n</tr>\n</tbody></table>\n<h3 id=\"ギフト履歴取得\">ギフト履歴取得</h3>\n<table>\n<thead>\n<tr>\n<th align=\"left\">メソッド</th>\n<th align=\"left\"><code>window.RPGAtsumaru.gift.getHistories()</code></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">説明</td>\n<td align=\"left\">このゲームに対しての有料ギフトの履歴を、最新のものから順に最大30件まで取得します。無料ギフトは含まれません</td>\n</tr>\n<tr>\n<td align=\"left\">引数</td>\n<td align=\"left\">なし</td>\n</tr>\n<tr>\n<td align=\"left\">戻り値</td>\n<td align=\"left\"><code>Promise&lt;GiftHistories&gt;</code></td>\n</tr>\n<tr>\n<td align=\"left\">制限</td>\n<td align=\"left\">このAPIは<a href=\"/common/rate-limit\">APIの呼び出し回数制限</a>の対象です</td>\n</tr>\n</tbody></table>\n<h4 id=\"戻り値の型-gifthistories-について\">戻り値の型 GiftHistories について</h4>\n<p>戻り値で取得できる <code>GiftHistories</code> は以下のような型です。</p>\n<pre><code class=\"language-js\">type GiftHistories = {\n    sceneName: string;\n    context: string;\n    userName: string;\n    point: number;\n    command: string;\n    comment: string;\n    reply: string;\n    thanks: boolean;\n    createdAt: number;\n}[]</code></pre>\n<p>プロパティの内容は次のようになっています。</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">プロパティ</th>\n<th align=\"left\">型</th>\n<th align=\"left\">内容</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">(this)</td>\n<td align=\"left\"><code>array</code></td>\n<td align=\"left\">ギフト履歴</td>\n</tr>\n<tr>\n<td align=\"left\">length</td>\n<td align=\"left\"><code>number</code></td>\n<td align=\"left\">今回取得したギフト履歴の件数</td>\n</tr>\n<tr>\n<td align=\"left\">[n].sceneName</td>\n<td align=\"left\"><code>string</code></td>\n<td align=\"left\">n+1番目のギフトのシーン名（※<a href=\"/comment\">コメント</a>に準じます）</td>\n</tr>\n<tr>\n<td align=\"left\">[n].context</td>\n<td align=\"left\"><code>string</code></td>\n<td align=\"left\">n+1番目のギフトのコンテキスト（※<a href=\"/comment\">コメント</a>に準じます）</td>\n</tr>\n<tr>\n<td align=\"left\">[n].userName</td>\n<td align=\"left\"><code>string</code></td>\n<td align=\"left\">n+1番目のギフトのユーザー名</td>\n</tr>\n<tr>\n<td align=\"left\">[n].point</td>\n<td align=\"left\"><code>number</code></td>\n<td align=\"left\">n+1番目のギフトのポイント</td>\n</tr>\n<tr>\n<td align=\"left\">[n].command</td>\n<td align=\"left\"><code>string</code></td>\n<td align=\"left\">n+1番目のギフトに添えられたコメントのコマンド</td>\n</tr>\n<tr>\n<td align=\"left\">[n].comment</td>\n<td align=\"left\"><code>string</code></td>\n<td align=\"left\">n+1番目のギフトに添えられたコメントの内容</td>\n</tr>\n<tr>\n<td align=\"left\">[n].reply</td>\n<td align=\"left\"><code>string</code></td>\n<td align=\"left\">n+1番目のギフトへの作者からの返信</td>\n</tr>\n<tr>\n<td align=\"left\">[n].thanks</td>\n<td align=\"left\"><code>boolean</code></td>\n<td align=\"left\">n+1番目のギフトに作者からの感謝（ハートマーク）が送られているか</td>\n</tr>\n<tr>\n<td align=\"left\">[n].createdAt</td>\n<td align=\"left\"><code>number</code></td>\n<td align=\"left\">n+1番目のギフトの投稿時刻（unix time sec）</td>\n</tr>\n</tbody></table>\n<h4 id=\"戻り値の例-2\">戻り値の例</h4>\n<pre><code class=\"language-js\">// window.RPGAtsumaru.gift.getHistories().then(function(v) { console.log(v) }) を実行\n[\n    {\n        sceneName: &quot;__title&quot;,\n        context: &quot;v2/&quot;,\n        userName: &quot;アツマライオン&quot;,\n        point: 1000,\n        command: &quot;red shita big&quot;,\n        comment: &quot;ゲーム開発、がんばライオン！&quot;,\n        reply: &quot;ありがライオン！！！！！&quot;,\n        thanks: true,\n        createdAt: 1534567890,\n    },\n    {\n        sceneName: &quot;map1&quot;,\n        context: &quot;v2/MapEvent1/page1/%E3%81%93%E3%81%AF&quot;,\n        userName: &quot;RPGアツマール開発チーム&quot;,\n        point: 10000,\n        command: &quot;&quot;,\n        comment: &quot;&quot;,\n        reply: &quot;&quot;,\n        thanks: false,\n        createdAt: 1534517890,\n    }\n]</code></pre>\n<h4 id=\"起こりうるエラーの種類-2\">起こりうるエラーの種類</h4>\n<table>\n<thead>\n<tr>\n<th align=\"left\">名前</th>\n<th align=\"left\">説明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\"><a href=\"/common/error\">INTERNAL_SERVER_ERROR</a></td>\n<td align=\"left\">RPGアツマールのサービス側で何らかの問題が発生しているか、または通信に失敗した</td>\n</tr>\n<tr>\n<td align=\"left\"><a href=\"/common/error\">API_CALL_LIMIT_EXCEEDED</a></td>\n<td align=\"left\">短時間にゲームAPIを利用しすぎて、一時的に利用を制限されている</td>\n</tr>\n</tbody></table>\n<h3 id=\"ギフトランキング取得\">ギフトランキング取得</h3>\n<table>\n<thead>\n<tr>\n<th align=\"left\">メソッド</th>\n<th align=\"left\"><code>window.RPGAtsumaru.gift.getRanking()</code></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">説明</td>\n<td align=\"left\">このゲームに対してのギフトランキングを、最大5件まで取得します。</td>\n</tr>\n<tr>\n<td align=\"left\">引数</td>\n<td align=\"left\">なし</td>\n</tr>\n<tr>\n<td align=\"left\">戻り値</td>\n<td align=\"left\"><code>Promise&lt;GiftRanking&gt;</code></td>\n</tr>\n<tr>\n<td align=\"left\">制限</td>\n<td align=\"left\">このAPIは<a href=\"/common/rate-limit\">APIの呼び出し回数制限</a>の対象です</td>\n</tr>\n</tbody></table>\n<h4 id=\"戻り値の型-giftranking-について\">戻り値の型 GiftRanking について</h4>\n<p>戻り値で取得できる <code>GiftRanking</code> は以下のような型です。</p>\n<pre><code class=\"language-js\">type GiftRanking = {\n    userName: string;\n    point: number;\n}[]</code></pre>\n<p>プロパティの内容は次のようになっています。</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">プロパティ</th>\n<th align=\"left\">型</th>\n<th align=\"left\">内容</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">(this)</td>\n<td align=\"left\"><code>array</code></td>\n<td align=\"left\">ギフトランキング</td>\n</tr>\n<tr>\n<td align=\"left\">length</td>\n<td align=\"left\"><code>number</code></td>\n<td align=\"left\">ギフトランキングの件数（※必ず5件まで。同着の場合5位までは入り切らないことも）</td>\n</tr>\n<tr>\n<td align=\"left\">[n].userName</td>\n<td align=\"left\"><code>string</code></td>\n<td align=\"left\">n+1番目のランキングのユーザー名</td>\n</tr>\n<tr>\n<td align=\"left\">[n].point</td>\n<td align=\"left\"><code>number</code></td>\n<td align=\"left\">n+1番目のランキングのポイント</td>\n</tr>\n</tbody></table>\n<h4 id=\"戻り値の例-3\">戻り値の例</h4>\n<pre><code class=\"language-js\">// window.RPGAtsumaru.gift.getRanking().then(function(v) { console.log(v) }) を実行\n[\n    {\n        userName: &quot;RPGアツマール開発チーム&quot;,\n        point: 30000\n    },\n    {\n        userName: &quot;アツマライオン&quot;,\n        point: 3000\n    }\n]</code></pre>\n<h4 id=\"起こりうるエラーの種類-3\">起こりうるエラーの種類</h4>\n<table>\n<thead>\n<tr>\n<th align=\"left\">名前</th>\n<th align=\"left\">説明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\"><a href=\"/common/error\">INTERNAL_SERVER_ERROR</a></td>\n<td align=\"left\">RPGアツマールのサービス側で何らかの問題が発生しているか、または通信に失敗した</td>\n</tr>\n<tr>\n<td align=\"left\"><a href=\"/common/error\">API_CALL_LIMIT_EXCEEDED</a></td>\n<td align=\"left\">短時間にゲームAPIを利用しすぎて、一時的に利用を制限されている</td>\n</tr>\n</tbody></table>\n<h3 id=\"表示ギフト取得\">表示ギフト取得</h3>\n<p>画面上にギフトが流れたときにそのギフトの情報を取得するには、コメントAPIの<a href=\"/apis/comment#%E8%A1%A8%E7%A4%BA%E3%82%B3%E3%83%A1%E3%83%B3%E3%83%88%E5%8F%96%E5%BE%97API\">表示コメント取得</a>をご利用ください。</p>\n<h3 id=\"投稿ギフト取得\">投稿ギフト取得</h3>\n<p>ゲームをプレイしているユーザー本人がギフトを投稿したときにそのギフトの情報を取得するには、コメントAPIの<a href=\"/apis/comment#%E6%8A%95%E7%A8%BF%E3%82%B3%E3%83%A1%E3%83%B3%E3%83%88%E5%8F%96%E5%BE%97API\">投稿コメント取得</a>をご利用ください。</p>\n<h2 id=\"関連ドキュメント\">関連ドキュメント</h2>\n<table>\n<thead>\n<tr>\n<th align=\"left\">ドキュメント</th>\n<th align=\"left\">リンク</th>\n<th align=\"left\">備考</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">機能解説</td>\n<td align=\"left\"><a href=\"/gift\">ギフト</a></td>\n<td align=\"left\">機能概要や全般的な解説</td>\n</tr>\n<tr>\n<td align=\"left\">プラグインでの利用方法</td>\n<td align=\"left\"><a href=\"/plugins\">プラグインでの利用方法</a></td>\n<td align=\"left\">RPGツクールシリーズユーザー向け</td>\n</tr>\n</tbody></table>\n<h2 id=\"最終更新日\">最終更新日</h2>\n<ul>\n<li>2020/11/25</li>\n</ul>\n"},"title":"ギフト","path":"/apis/gift"}}
