{"path":"common/error","templateID":1,"sharedPropsHashes":{"apiList":"2azxz1"},"localProps":{"reference":{"title":"エラーハンドリング","slug":"common/error","description":"RPGアツマールのゲームAPIが返すエラーについて","order":4,"navi":"共通事項","contents":"<h2 id=\"概要\">概要</h2>\n<p>各RPGアツマール ゲームAPI共通で発生する可能性のある例外・エラーについての情報です。</p>\n<p>基本的にプラグインの作者、APIを直接利用するかた向けの情報となります(プラグイン利用者には基本的には不要な情報となります)。</p>\n<p>サーバーエラーや非ログイン等のエラーを扱いたいときに必要となる情報です。</p>\n<h2 id=\"エラーオブジェクト\">エラーオブジェクト</h2>\n<pre><code class=\"language-ts\">interface AtsumaruApiError {\n    readonly errorType = &quot;atsumaruApiError&quot;;\n    readonly code: string;\n    readonly message: string;\n}</code></pre>\n<table>\n<thead>\n<tr>\n<th align=\"left\">code一覧</th>\n<th align=\"left\">解説</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">BAD_REQUEST</td>\n<td align=\"left\">ゲーム側でなんらかのAPIの使い方を間違えている場合のコードです。例えば、メソッドの引数の型を間違えている場合に発生します。</td>\n</tr>\n<tr>\n<td align=\"left\">UNAUTHORIZED</td>\n<td align=\"left\">プレイヤーが<a href=\"/common/login\">ログイン</a>している必要があるAPIを、プレイヤーが非ログイン状態で使った場合のコードです。</td>\n</tr>\n<tr>\n<td align=\"left\">API_CALL_LIMIT_EXCEEDED</td>\n<td align=\"left\"><a href=\"/common/rate-limit\">APIの呼び出し回数制限</a> の上限に達した際に返されるコードです。</td>\n</tr>\n<tr>\n<td align=\"left\">FORBIDDEN</td>\n<td align=\"left\">次のように、プレイヤーやゲームがAPIに対してアクセス権限がない場合に発生します。<ul><li>ユーザーIDを指定するAPIで、対象のユーザー情報を取得する権限がない場合(相手のユーザーのプレイヤー通信有効化がされていないなど)</li><li>ゲームIDを指定するAPIで、対象のゲーム情報を取得する権限がない場合(対象のゲームが非公開であるなど)</li></ul></td>\n</tr>\n<tr>\n<td align=\"left\">INTERNAL_SERVER_ERROR</td>\n<td align=\"left\">サーバー側で何らかの問題が発生していたり、通信に失敗した場合のコードです。</td>\n</tr>\n</tbody></table>\n<h2 id=\"コード例\">コード例</h2>\n<pre><code class=\"language-js\">window.RPGAtsumaru.scoreboards.setRecord(boardId, score)\n    .catch(function(err) {\n        switch(err.code) {\n            case &quot;BAD_REQUEST&quot;:\n            // ゲーム側で何か間違えているとき＝指定したボードIDが大きすぎるかマイナスの場合などに発生\n            /* エラーハンドリング処理 */\n            break;\n            case &quot;INTERNAL_SERVER_ERROR&quot;:\n            // サーバー側で何らかの問題＝通信不良やメンテ等で発生\n            /* エラーハンドリング処理 */\n            break;\n        }\n    })</code></pre>\n<h2 id=\"最終更新日\">最終更新日</h2>\n<ul>\n<li>2020/02/28</li>\n</ul>\n"},"title":"エラーハンドリング","path":"/common/error"}}
